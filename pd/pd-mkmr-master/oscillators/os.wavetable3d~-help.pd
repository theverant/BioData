#N canvas 502 22 523 859 10;
#X obj 101 158 hsl 71 16 0 7 0 1 empty empty X\\\ Position -2 -6 0
12 #00faff #000000 #000000 0 1;
#X obj 98 220 line~;
#X obj 77 322 hsl 101 16 0 1 0 0 empty empty VOLUME -2 -6 0 12 #00fc04
#000000 #000000 0 1;
#X obj 59 411 *~;
#X obj 59 447 dac~ 1 2;
#X obj 74 343 pow 4;
#X obj 74 385 line~;
#X obj 29 124 mtof;
#X floatatom 29 145 5 0 0 0 - - - 0;
#X floatatom 98 179 5 0 0 0 - - - 0;
#X obj 99 103 nbx 4 16 2 4096 0 1 empty empty Waveform\\\ size\\\ in\\\ samples
0 -8 0 10 #00faff #000000 #000000 256 256;
#X obj 29 170 phasor~;
#X obj 29 103 nbx 4 16 0 127 0 1 empty empty MIDI 0 -8 0 10 #00faff
#000000 #000000 46 256;
#X msg 98 199 \$1 250;
#X obj 259 103 bng 16 250 50 0 empty empty Open\\\ File 0 -8 0 10 #00faff
#000000 #000000;
#X obj 74 364 pack f 20;
#N canvas 694 330 450 220 oscilloscope 0;
#N canvas 0 22 450 278 (subpatch) 0;
#X array \$0-scope 441 float 0;
#X coords 0 1 440 -1 100 70 1 0 0;
#X restore 20 45 graph;
#X obj 150 112 tabwrite~ \$0-scope;
#X obj 150 20 inlet~;
#X obj 210 20 loadbang;
#X msg 210 41 1;
#X obj 210 62 metro 100;
#X connect 2 0 1 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 1 0;
#X coords 0 -1 1 1 120 115 1 10 10;
#X restore 201 312 pd oscilloscope;
#X obj 259 124 s \$0-open;
#X obj 99 124 s \$0-size;
#X obj 11 11 cnv 5 5 24 empty empty Three\\\ dimensional\\\ wavetable\\\ scanner
12 12 0 16 #000000 #000000 0;
#X obj 11 491 cnv 5 490 5 empty empty INLETS: 8 18 0 13 #202020 #000000
0;
#X obj 11 811 cnv 5 490 5 empty empty empty 8 18 0 13 #202020 #000000
0;
#X obj 11 677 cnv 2 490 2 empty empty OUTLETS: 8 12 0 13 #202020 #000000
0;
#X text 107 511 1) signal - signal input;
#X obj 11 717 cnv 2 490 2 empty empty ARGUMENTS: 8 12 0 13 #202020
#000000 0;
#N canvas 893 534 387 201 reference 0;
#X text 9 41 https://github.com/dotmmb/mmb;
#X text 9 11 Taken from Mike Moser-Booth's bl-oscillator abstractions
from the mmb library.;
#X restore 17 825 pd reference;
#X text 107 691 1) signal - wavetable output;
#N canvas 808 387 969 530 how-to-generate-wavetables 0;
#X obj 53 199 cnv 15 450 90 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 62 221 bng 16 250 50 0 \$0-generate-s \$0-generate-r Generate
0 -8 0 10 #00ff04 #000000 #000000;
#X obj 122 221 nbx 5 16 3 13 0 1 \$0-genSize-s \$0-genSize-r Size: 256 samples
0 -8 0 10 #000000 #ffffff #000000 8 256;
#X msg 746 103 2 \$1;
#X obj 746 124 pow;
#X obj 372 221 bng 16 250 50 0 \$0-writeWavetable-s \$0-writeWavetable-r
Write\\\ wavetable\\\ to\\\ wav 0 -8 0 10 #ff0400 #000000 #000000;
#X obj 122 256 nbx 5 16 1 127 0 1 \$0-frames-s \$0-frames-r Frames
0 -8 0 10 #000000 #ffffff #000000 64 256;
#X msg 773 166 label Size: \$1 samples;
#X text 746 62 GUI:Size:nbx;
#X obj 621 214 r \$0-frames-s;
#X obj 621 307 *;
#X obj 646 281 t b f;
#X obj 183 256 cnv 16 130 16 empty \$0-displayTotal Total: 16576 samples
2 8 0 10 #000000 #00ff04 0;
#X obj 583 418 s \$0-displayTotal;
#X msg 583 397 label Total: \$1 samples;
#X obj 556 449 array size \$0-wavetable;
#X obj 60 152 tgl 16 0 empty empty empty 17 7 0 10 #00faff #000000
#000000 0 1;
#N canvas 144 22 891 989 PhaseModulation 0;
#X obj 302 341 until;
#X obj 430 367 + 1;
#X msg 405 289 0;
#X obj 334 393 t f f;
#X obj 368 186 until;
#X obj 500 212 + 1;
#X msg 485 160 0;
#X obj 458 134 t b b;
#X obj 470 212 i;
#X obj 322 289 v \$0-size;
#X obj 390 367 i;
#X obj 368 160 v \$0-frames-s;
#X obj 501 734 +;
#X obj 334 723 sin;
#X obj 516 708 *;
#X obj 322 315 t f f;
#X obj 334 445 /;
#X obj 334 697 * 6.28319;
#X obj 378 263 t b b;
#X text 546 718 <- onset to next frame;
#X text 530 212 <- counter for frames;
#X text 460 367 <- counter for waveform size in samples;
#X text 154 425 linear phase from 0 to 1 ->;
#X text 204 723 sinewave function ->;
#X text 188 160 Retrieve number of frames ->;
#X text 132 288 Retrieve number of samples ->;
#X text 445 289 <- Reset counter;
#X text 515 160 <- Reset counter;
#X obj 349 419 - 0;
#X text 264 697 two pi ->;
#X obj 334 546 t f f;
#X obj 379 619 sin;
#X obj 379 593 * 6.28319;
#X obj 334 671 +;
#X obj 379 655 *;
#X text 409 567 <- Ratio;
#X text 264 667 Carrier ––;
#X text 379 547 Modulator ––;
#X obj 489 494 t f f;
#X text 507 629 <- Modulation sweep amount;
#X obj 516 666 t f b;
#X obj 543 687 v \$0-size;
#X text 128 10 GUI:Generate:bang;
#X obj 128 97 spigot;
#X obj 161 76 inlet;
#X text 161 56 Inlet 1: Render: on/off;
#X obj 128 30 r \$0-generate;
#X obj 128 118 t b b;
#X obj 376 760 tabwrite \$0-buffer;
#X obj 56 563 t b b;
#X obj 56 605 until;
#X obj 86 656 i;
#X obj 116 656 + 1;
#X msg 101 621 0;
#X obj 36 749 array get \$0-buffer;
#X obj 36 677 t f f;
#X obj 56 861 array set \$0-wavetable;
#X obj 36 770 t l l;
#X obj 36 831 list append;
#X msg 77 796 \$1 \$2 \$3;
#X obj 128 537 t b b;
#X obj 56 584 v \$0-frames-s;
#X obj 36 728 pack f f;
#X obj 36 707 *;
#X obj 155 644 v \$0-size;
#X obj 189 690 + 3;
#X obj 174 828 *;
#X obj 155 665 t f f;
#X obj 117 691 t f f;
#X text 225 818 <- Append the first three samples to the end of each
frame = proper interpolation reading of each frame without clicks.
;
#X obj 477 629 * 1;
#X obj 477 524 t f b;
#X obj 504 545 v \$0-rows-s;
#X obj 504 566 t f f;
#X obj 531 587 - 1;
#X obj 477 608 /;
#X obj 477 587 %;
#X obj 379 567 *;
#X obj 470 237 t b f f;
#X obj 560 268 t f b;
#X obj 560 310 div;
#X obj 560 331 + 1;
#X obj 587 289 v \$0-rows-s;
#X text 568 250 Use number of rows to change the ratio;
#X connect 0 0 10 0;
#X connect 1 0 10 1;
#X connect 2 0 10 1;
#X connect 3 0 16 0;
#X connect 3 1 12 0;
#X connect 4 0 8 0;
#X connect 5 0 8 1;
#X connect 6 0 8 1;
#X connect 7 0 11 0;
#X connect 7 1 6 0;
#X connect 8 0 5 0;
#X connect 8 0 78 0;
#X connect 9 0 15 0;
#X connect 10 0 1 0;
#X connect 10 0 3 0;
#X connect 11 0 4 0;
#X connect 12 0 48 1;
#X connect 13 0 48 0;
#X connect 14 0 12 1;
#X connect 15 0 0 0;
#X connect 15 1 28 0;
#X connect 16 0 30 0;
#X connect 17 0 13 0;
#X connect 18 0 9 0;
#X connect 18 1 2 0;
#X connect 28 0 16 1;
#X connect 30 0 33 0;
#X connect 30 1 77 0;
#X connect 31 0 34 0;
#X connect 32 0 31 0;
#X connect 33 0 17 0;
#X connect 34 0 33 1;
#X connect 38 0 71 0;
#X connect 38 1 40 0;
#X connect 40 0 14 0;
#X connect 40 1 41 0;
#X connect 41 0 14 1;
#X connect 43 0 47 0;
#X connect 44 0 43 1;
#X connect 46 0 43 0;
#X connect 47 0 60 0;
#X connect 47 1 7 0;
#X connect 49 0 61 0;
#X connect 49 1 53 0;
#X connect 50 0 51 0;
#X connect 51 0 52 0;
#X connect 51 0 55 0;
#X connect 52 0 51 1;
#X connect 53 0 51 1;
#X connect 54 0 57 0;
#X connect 55 0 63 0;
#X connect 55 1 66 0;
#X connect 57 0 58 0;
#X connect 57 1 59 0;
#X connect 58 0 56 0;
#X connect 59 0 58 1;
#X connect 60 0 49 0;
#X connect 60 1 64 0;
#X connect 61 0 50 0;
#X connect 62 0 54 0;
#X connect 63 0 62 0;
#X connect 64 0 67 0;
#X connect 65 0 66 1;
#X connect 66 0 56 1;
#X connect 67 0 68 0;
#X connect 67 1 65 0;
#X connect 68 0 63 1;
#X connect 68 1 62 1;
#X connect 70 0 34 1;
#X connect 71 0 76 0;
#X connect 71 1 72 0;
#X connect 72 0 73 0;
#X connect 73 0 76 1;
#X connect 73 1 74 0;
#X connect 74 0 75 1;
#X connect 75 0 70 0;
#X connect 76 0 75 0;
#X connect 77 0 32 0;
#X connect 78 0 18 0;
#X connect 78 1 38 0;
#X connect 78 2 79 0;
#X connect 79 0 80 0;
#X connect 79 1 82 0;
#X connect 80 0 81 0;
#X connect 81 0 77 1;
#X connect 82 0 80 1;
#X restore 60 174 pd PhaseModulation;
#X obj 537 155 r \$0-generate-s;
#X text 537 135 GUI:Generate:bang;
#X obj 539 475 s \$0-generate;
#X obj 646 260 + 3;
#X obj 556 364 f;
#X obj 776 291 r \$0-size;
#X obj 751 265 r \$0-frames-s;
#X obj 751 338 *;
#X obj 776 312 t b f;
#X obj 746 385 array size \$0-buffer;
#X obj 746 82 r \$0-genSize-s;
#X obj 773 187 s \$0-genSize-r;
#X obj 646 239 r \$0-size;
#X obj 746 364 f;
#X obj 372 256 bng 16 250 50 0 \$0-writePdWavetable-s \$0-writePdWavetable-r
Write\\\ Pd\\\ wavetable\\\ to\\\ wav 0 -8 0 10 #ff0400 #000000 #000000
;
#X obj 537 176 t b b b;
#X obj 746 145 t f f;
#X obj 731 192 f;
#X obj 731 213 s \$0-size;
#X obj 556 338 t b b;
#X text 537 25 Change frame size \, resize buffer and wavetable arrays
and send a bang to generate the waveforms;
#X text 621 194 GUI:Frames:nbx;
#X text 751 245 GUI:Frames:nbx;
#X obj 621 328 t f f;
#X obj 53 456 soundfiler;
#X msg 53 362 write -wave ./pd-wavetable \$1-wavetable;
#X obj 53 320 r \$0-writePdWavetable-s;
#X obj 53 341 f \$0;
#X obj 83 409 f \$0;
#X obj 83 388 r \$0-writeWavetable-s;
#X msg 83 430 write -wave ./wavetable \$1-buffer;
#X text 53 300 GUI:writeWavetables:bang;
#X text 60 14 This subpatch shows how to generate our own wavetables
in both Pd format (with guard points) and external format (without
guard points).;
#X text 60 64 First select enable only one of the following toggles.
Then click on the "Generate" bang to generate the selected wavetable.
;
#X text 60 114 Open each subpatch to see how to generate each wavetable.
;
#X obj 242 221 nbx 3 16 1 127 0 1 \$0-rows-s \$0-rows-r Rows 0 -8 0
10 #000000 #ffffff #000000 8 256;
#X connect 3 0 4 0;
#X connect 4 0 34 0;
#X connect 7 0 29 0;
#X connect 9 0 10 0;
#X connect 10 0 41 0;
#X connect 11 0 10 0;
#X connect 11 1 10 1;
#X connect 14 0 13 0;
#X connect 16 0 17 0;
#X connect 18 0 33 0;
#X connect 21 0 11 0;
#X connect 22 0 15 0;
#X connect 23 0 26 0;
#X connect 24 0 25 0;
#X connect 25 0 31 1;
#X connect 26 0 25 0;
#X connect 26 1 25 1;
#X connect 28 0 3 0;
#X connect 30 0 21 0;
#X connect 31 0 27 0;
#X connect 33 0 20 0;
#X connect 33 1 37 0;
#X connect 33 2 35 0;
#X connect 34 0 35 1;
#X connect 34 1 7 0;
#X connect 35 0 36 0;
#X connect 37 0 22 0;
#X connect 37 1 31 0;
#X connect 41 0 22 1;
#X connect 41 1 14 0;
#X connect 43 0 42 0;
#X connect 44 0 45 0;
#X connect 45 0 43 0;
#X connect 46 0 48 0;
#X connect 47 0 46 0;
#X connect 48 0 42 0;
#X restore 269 462 pd how-to-generate-wavetables;
#X obj 191 158 hsl 71 16 0 1 0 1 empty empty Y\\\ Position -2 -6 0
12 #00faff #000000 #000000 0 1;
#X obj 188 220 line~;
#X floatatom 188 179 5 0 0 0 - - - 0;
#X msg 188 199 \$1 250;
#X text 107 531 2) float/signal - X wavetable position (from 0 to n)
;
#X text 107 551 3) float/signal - Y wavetable position (from 0 to n)
;
#X text 107 771 3) float - number of rows (default 8);
#X text 107 731 1) symbol - set wavetable array;
#X text 107 751 2) float - frame size in samples (default 256);
#N canvas 290 22 753 736 how-to-import-external-wavetables 0;
#X obj 454 386 soundfiler;
#X floatatom 454 407 7 0 0 0 - - - 0;
#X obj 70 352 t b b;
#X obj 12 399 until;
#X obj 82 420 i;
#X obj 112 420 + 1;
#X msg 97 385 0;
#X obj 82 591 array get \$0-buffer;
#X obj 434 599 array size \$0-wavetable;
#X obj 82 461 t f f;
#X obj 171 690 array set \$0-wavetable;
#X obj 454 344 list append \$0;
#X obj 82 612 t l l;
#X obj 82 664 list append;
#X obj 250 476 + 3;
#X obj 250 455 r \$0-size;
#X obj 82 565 pack f f;
#X msg 145 638 \$1 \$2 \$3;
#X obj 434 573 *;
#X obj 454 448 /;
#X obj 454 489 v \$0-frames;
#X obj 12 378 v \$0-frames;
#X obj 434 547 v \$0-frames;
#X obj 82 544 *;
#X obj 100 497 r \$0-size;
#X obj 100 518 t f f;
#X obj 235 497 *;
#X obj 469 427 r \$0-size;
#X floatatom 454 469 5 0 0 0 - - - 0;
#X obj 415 318 t b b s;
#X text 494 469 <- number of frames in file;
#X text 474 324 // load file to buffer array;
#X text 162 664 <- append last three samples from waveform;
#X obj 514 557 + 3;
#X obj 514 536 r \$0-size;
#X text 444 516 Resize array considering the guard points;
#X text 210 435 Onset to write to (next frame);
#X text 142 354 | \; | \; | \; | <- Count number of frames \; | \;
| \; | \;;
#X obj 242 256 loadbang;
#X msg 454 365 read -resize \$1 \$2-buffer;
#X msg 242 297 symbol ./PLAITS01.WAV;
#X text 202 524 | \; | \; | \; | <- get waveform from buffer array
\; | \; | \; | \;;
#X text 321 690 <- write adapted waveforms to wavetable array;
#X obj 415 271 r \$0-open;
#X obj 415 292 openpanel;
#X text 12 44 Usually the frames of a wavetable have a size of 2^n
samples (256 \, 512 \, 1024). In order to reproduce them correctly
\, the size should be 2^n + 3 to account for the 4 point interpolation
used by [tabread4~]. These three extra points \, which are also called
"guard points" \, can be injected by appending the last three samples
of the waveform into each frame.;
#X text 475 292 <- get file directory;
#X obj 405 71 array define \$0-wavetable;
#X obj 405 31 array define \$0-buffer;
#X text 405 11 Original wavetable goes here;
#X text 405 51 Adapted wavetable goes here;
#X text 504 405 <- number of samples;
#X obj 12 258 pdcontrol;
#X msg 32 232 browse https://www.kimurataro.com/free-wavetables.html
;
#X msg 12 212 browse https://waveeditonline.com/;
#X text 12 192 Free \, open-source wavetables;
#X text 12 12 To import an external wavetable it must be adapted for
Pd using the following code:;
#X obj 242 277 del 0;
#X text 12 134 To avoid doing this process everytime \, export the
adapted pd wavetable version into a wave file and load it into an array.
;
#X symbolatom 438 147 20 0 0 0 - - - 0;
#X obj 405 121 bng 16 250 50 0 empty empty Write\\\ Pd\\\ wavetable\\\ to\\\ wav
0 -8 0 10 #ff0400 #000000 #000000;
#X obj 405 230 soundfiler;
#X obj 405 188 pack s \$0;
#X obj 405 167 symbol;
#X text 438 127 Wavetable name;
#X msg 405 209 write -wave ./\$1 \$2-wavetable;
#X obj 581 112 loadbang;
#X msg 581 132 symbol pd-wavetable;
#X connect 0 0 1 0;
#X connect 1 0 19 0;
#X connect 2 0 21 0;
#X connect 2 1 6 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 4 0 9 0;
#X connect 5 0 4 1;
#X connect 6 0 4 1;
#X connect 7 0 12 0;
#X connect 9 0 23 0;
#X connect 9 1 26 0;
#X connect 11 0 39 0;
#X connect 12 0 13 0;
#X connect 12 1 17 0;
#X connect 13 0 10 0;
#X connect 14 0 26 1;
#X connect 15 0 14 0;
#X connect 16 0 7 0;
#X connect 17 0 13 1;
#X connect 18 0 8 0;
#X connect 19 0 28 0;
#X connect 21 0 3 0;
#X connect 22 0 18 0;
#X connect 23 0 16 0;
#X connect 24 0 25 0;
#X connect 25 0 23 1;
#X connect 25 1 16 1;
#X connect 26 0 10 1;
#X connect 27 0 19 1;
#X connect 28 0 20 0;
#X connect 29 0 2 0;
#X connect 29 1 22 0;
#X connect 29 2 11 0;
#X connect 33 0 18 1;
#X connect 34 0 33 0;
#X connect 38 0 57 0;
#X connect 39 0 0 0;
#X connect 40 0 29 0;
#X connect 43 0 44 0;
#X connect 44 0 29 0;
#X connect 53 0 52 0;
#X connect 54 0 52 0;
#X connect 57 0 40 0;
#X connect 59 0 63 1;
#X connect 60 0 63 0;
#X connect 62 0 65 0;
#X connect 63 0 62 0;
#X connect 65 0 61 0;
#X connect 66 0 67 0;
#X connect 67 0 59 0;
#X restore 269 442 pd how-to-import-external-wavetables;
#X obj 281 158 hsl 71 16 0 3 0 1 empty empty Z\\\ Position -2 -6 0
12 #00faff #000000 #000000 0 1;
#X obj 278 220 line~;
#X floatatom 278 179 5 0 0 0 - - - 0;
#X msg 278 199 \$1 250;
#X obj 59 246 os.wavetable3d~ \$0-wavetable 256 8 2;
#X text 27 36 [os.wavetable3d~] is a wavetable scanner for three dimensional
wavetable files.;
#X text 352 246 Work in progress;
#X text 107 571 4) float/signal - Z wavetable position (from 0 to n)
;
#X text 107 591 5) symbol - set wavetable array;
#X text 107 611 6) float - set frame size in samples (default 256)
;
#X text 107 631 7) float - set number of rows (default 8);
#X text 107 651 8) float - set number of columns (default 2);
#X text 107 791 4) float - number of columns (defualt 2);
#X connect 0 0 9 0;
#X connect 1 0 42 1;
#X connect 2 0 5 0;
#X connect 3 0 4 0;
#X connect 3 0 4 1;
#X connect 5 0 15 0;
#X connect 6 0 3 1;
#X connect 7 0 8 0;
#X connect 8 0 11 0;
#X connect 9 0 13 0;
#X connect 10 0 18 0;
#X connect 11 0 42 0;
#X connect 12 0 7 0;
#X connect 13 0 1 0;
#X connect 14 0 17 0;
#X connect 15 0 6 0;
#X connect 28 0 30 0;
#X connect 29 0 42 2;
#X connect 30 0 31 0;
#X connect 31 0 29 0;
#X connect 38 0 40 0;
#X connect 39 0 42 3;
#X connect 40 0 41 0;
#X connect 41 0 39 0;
#X connect 42 0 3 0;
#X connect 42 0 16 0;
